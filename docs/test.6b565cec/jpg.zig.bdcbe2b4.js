var data = {lines:[
{"lineNum":"    1","line":"const std = @import(\"std\");"},
{"lineNum":"    2","line":"const log = std.log.scoped(.jpg);"},
{"lineNum":"    3","line":"const Allocator = std.mem.Allocator;"},
{"lineNum":"    4","line":"const lib = @import(\"../lib.zig\");"},
{"lineNum":"    5","line":"const Reader = lib.Reader;"},
{"lineNum":"    6","line":"const assert = std.debug.assert;"},
{"lineNum":"    7","line":""},
{"lineNum":"    8","line":"pub const JPGRecoverer = struct {"},
{"lineNum":"    9","line":"    pub const JPEG = struct {"},
{"lineNum":"   10","line":"        alloc: Allocator,"},
{"lineNum":"   11","line":"        data: []u8,"},
{"lineNum":"   12","line":""},
{"lineNum":"   13","line":"        pub fn init(alloc: Allocator, data: []u8) JPEG {","class":"lineCov","hits":"2","order":"390","possible_hits":"2",},
{"lineNum":"   14","line":"            return .{","class":"lineCov","hits":"1","order":"391","possible_hits":"1",},
{"lineNum":"   15","line":"                .alloc = alloc,"},
{"lineNum":"   16","line":"                .data = data,"},
{"lineNum":"   17","line":"            };"},
{"lineNum":"   18","line":"        }"},
{"lineNum":"   19","line":""},
{"lineNum":"   20","line":"        pub fn deinit(self: JPEG) void {","class":"lineCov","hits":"2","order":"396","possible_hits":"2",},
{"lineNum":"   21","line":"            self.alloc.free(self.data);","class":"lineCov","hits":"1","order":"397","possible_hits":"1",},
{"lineNum":"   22","line":"        }"},
{"lineNum":"   23","line":""},
{"lineNum":"   24","line":"        pub fn write_to_file(self: JPEG, path: []const u8) !void {","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   25","line":"            const f = try std.fs.cwd().createFile(path, .{});","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   26","line":"            defer f.close();","class":"lineNoCov","hits":"0","possible_hits":"2",},
{"lineNum":"   27","line":"            try f.writer().writeAll(self.data);","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"   28","line":"        }"},
{"lineNum":"   29","line":"    };"},
{"lineNum":"   30","line":""},
{"lineNum":"   31","line":"    alloc: Allocator,"},
{"lineNum":"   32","line":"    reader: Reader,"},
{"lineNum":"   33","line":"    // /// directions on how to navigate the given reader"},
{"lineNum":"   34","line":"    // /// example:"},
{"lineNum":"   35","line":"    // reader_map: ?*const ReaderMap = null,"},
{"lineNum":"   36","line":"    max_size: usize = 20e6,"},
{"lineNum":"   37","line":"    stride: usize = 512,"},
{"lineNum":"   38","line":"    debug: bool = false,"},
{"lineNum":"   39","line":""},
{"lineNum":"   40","line":"    const Self = @This();"},
{"lineNum":"   41","line":""},
{"lineNum":"   42","line":"    pub fn init(alloc: Allocator, reader: Reader) Self {","class":"lineCov","hits":"1","order":"334","possible_hits":"1",},
{"lineNum":"   43","line":"        return Self {","class":"lineCov","hits":"1","order":"335","possible_hits":"1",},
{"lineNum":"   44","line":"            .alloc = alloc,"},
{"lineNum":"   45","line":"            .reader = reader,"},
{"lineNum":"   46","line":"        };"},
{"lineNum":"   47","line":"    }"},
{"lineNum":"   48","line":""},
{"lineNum":"   49","line":"    pub fn deinit(self: Self) void {","class":"lineCov","hits":"2","order":"399","possible_hits":"2",},
{"lineNum":"   50","line":"        self.reader.deinit();","class":"lineCov","hits":"1","order":"400","possible_hits":"1",},
{"lineNum":"   51","line":"    }"},
{"lineNum":"   52","line":""},
{"lineNum":"   53","line":"    fn is_jpg_start(bytes: []const u8) bool {","class":"lineCov","hits":"2","order":"358","possible_hits":"2",},
{"lineNum":"   54","line":"        return std.mem.eql(u8, bytes, &[3]u8{ 0xff, 0xd8, 0xff });","class":"lineCov","hits":"1","order":"359","possible_hits":"1",},
{"lineNum":"   55","line":"    }"},
{"lineNum":"   56","line":""},
{"lineNum":"   57","line":"    fn is_jpg_end(bytes: []const u8) bool {","class":"lineCov","hits":"2","order":"366","possible_hits":"2",},
{"lineNum":"   58","line":"        return std.mem.eql(u8, bytes, &[2]u8{ 0xff, 0xd9 });","class":"lineCov","hits":"1","order":"367","possible_hits":"1",},
{"lineNum":"   59","line":"    }"},
{"lineNum":"   60","line":""},
{"lineNum":"   61","line":"    pub fn find_next(self: *Self) !?JPEG {","class":"lineCov","hits":"2","order":"337","possible_hits":"2",},
{"lineNum":"   62","line":"        const buf = try self.alloc.alloc(u8, self.stride);","class":"lineCov","hits":"1","order":"338","possible_hits":"1",},
{"lineNum":"   63","line":"        defer self.alloc.free(buf);","class":"linePartCov","hits":"1","order":"392","possible_hits":"4",},
{"lineNum":"   64","line":"        var img_data = try self.alloc.alloc(u8, self.max_size);","class":"linePartCov","hits":"1","order":"339","possible_hits":"2",},
{"lineNum":"   65","line":"        errdefer self.alloc.free(img_data);","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"   66","line":""},
{"lineNum":"   67","line":"        var jpg_mem_copied: usize = 0;","class":"lineCov","hits":"1","order":"340","possible_hits":"1",},
{"lineNum":"   68","line":"        var jpg_started = false;","class":"lineCov","hits":"1","order":"341","possible_hits":"1",},
{"lineNum":"   69","line":"        var idx_jpg_start: usize = 0;","class":"lineCov","hits":"1","order":"342","possible_hits":"1",},
{"lineNum":"   70","line":"        var idx_jpg_end: usize = 0;","class":"lineCov","hits":"1","order":"343","possible_hits":"1",},
{"lineNum":"   71","line":"        var embedded_jpeg_count: usize = 0;","class":"lineCov","hits":"1","order":"344","possible_hits":"1",},
{"lineNum":"   72","line":"        var jpg_ends_found: usize = 0;","class":"lineCov","hits":"1","order":"345","possible_hits":"1",},
{"lineNum":"   73","line":""},
{"lineNum":"   74","line":"        var read_bytes = try self.reader.read(buf);","class":"lineCov","hits":"1","order":"346","possible_hits":"1",},
{"lineNum":"   75","line":"        var bytes_left: usize = 0;","class":"lineCov","hits":"1","order":"347","possible_hits":"1",},
{"lineNum":"   76","line":"        var bytes_left_buf: [2]u8 = undefined;","class":"lineCov","hits":"1","order":"348","possible_hits":"1",},
{"lineNum":"   77","line":"        while (read_bytes > 0) : ({","class":"lineCov","hits":"1","order":"349","possible_hits":"1",},
{"lineNum":"   78","line":"            read_bytes = try self.reader.read(buf);","class":"linePartCov","hits":"1","order":"379","possible_hits":"2",},
{"lineNum":"   79","line":"        }) {"},
{"lineNum":"   80","line":"            var idx: usize = 0;","class":"lineCov","hits":"1","order":"350","possible_hits":"1",},
{"lineNum":"   81","line":"            bytes_left = 0;","class":"lineCov","hits":"1","order":"351","possible_hits":"1",},
{"lineNum":"   82","line":"            while (idx < read_bytes) {","class":"lineCov","hits":"1","order":"352","possible_hits":"1",},
{"lineNum":"   83","line":"                bytes_left = read_bytes - idx;","class":"linePartCov","hits":"1","order":"353","possible_hits":"2",},
{"lineNum":"   84","line":"                // ensure that the next read won\'t possibly miss"},
{"lineNum":"   85","line":"                // a jpg start or jpg end"},
{"lineNum":"   86","line":"                if (bytes_left < 3 and read_bytes < self.stride and is_jpg_end(buf[idx..idx + 2])) {","class":"lineCov","hits":"2","order":"354","possible_hits":"2",},
{"lineNum":"   87","line":"                    jpg_ends_found += 1;","class":"linePartCov","hits":"1","order":"380","possible_hits":"2",},
{"lineNum":"   88","line":"                    idx += 2;","class":"lineCov","hits":"1","order":"381","possible_hits":"1",},
{"lineNum":"   89","line":"                    idx_jpg_end = idx;","class":"lineCov","hits":"1","order":"382","possible_hits":"1",},
{"lineNum":"   90","line":"                    break;","class":"lineCov","hits":"1","order":"383","possible_hits":"1",},
{"lineNum":"   91","line":"                } else if (bytes_left < 3 and read_bytes > 3) {","class":"lineCov","hits":"2","order":"355","possible_hits":"2",},
{"lineNum":"   92","line":"                    if (self.debug) log.debug(\"going back by {d} bytes, next bytes should be {x}\", .{bytes_left, buf[buf.len-bytes_left..]});","class":"linePartCov","hits":"1","order":"369","possible_hits":"2",},
{"lineNum":"   93","line":"                    try self.reader.seek_by(-@as(i64, @intCast(bytes_left)));","class":"linePartCov","hits":"1","order":"370","possible_hits":"2",},
{"lineNum":"   94","line":"                    break;","class":"lineCov","hits":"3","order":"356","possible_hits":"3",},
{"lineNum":"   95","line":"                }"},
{"lineNum":"   96","line":""},
{"lineNum":"   97","line":"                if (!jpg_started and is_jpg_start(buf[idx..idx + 3])) {","class":"lineCov","hits":"2","order":"357","possible_hits":"2",},
{"lineNum":"   98","line":"                    idx_jpg_start = idx;","class":"lineCov","hits":"1","order":"360","possible_hits":"1",},
{"lineNum":"   99","line":"                    idx += 3;","class":"linePartCov","hits":"1","order":"361","possible_hits":"2",},
{"lineNum":"  100","line":"                    jpg_started = true;","class":"lineCov","hits":"1","order":"362","possible_hits":"1",},
{"lineNum":"  101","line":"                } else if (jpg_started and is_jpg_start(buf[idx..idx + 3])) {","class":"lineCov","hits":"2","order":"364","possible_hits":"2",},
{"lineNum":"  102","line":"                    embedded_jpeg_count += 1;","class":"linePartCov","hits":"1","order":"403","possible_hits":"2",},
{"lineNum":"  103","line":"                    if (self.debug) log.debug(\"embedded_jpeg_count: {d}\", .{embedded_jpeg_count});","class":"linePartCov","hits":"1","order":"404","possible_hits":"2",},
{"lineNum":"  104","line":"                    idx += 3;","class":"linePartCov","hits":"1","order":"405","possible_hits":"2",},
{"lineNum":"  105","line":"                } else if (jpg_started and is_jpg_end(buf[idx..idx + 2])) {","class":"lineCov","hits":"2","order":"365","possible_hits":"2",},
{"lineNum":"  106","line":"                    jpg_ends_found += 1;","class":"linePartCov","hits":"1","order":"406","possible_hits":"2",},
{"lineNum":"  107","line":"                    if (self.debug) log.debug(\"embedded_jpeg_count: {d}, ends_found: {d}\", .{embedded_jpeg_count, jpg_ends_found});","class":"linePartCov","hits":"1","order":"407","possible_hits":"2",},
{"lineNum":"  108","line":"                    idx += 2;","class":"linePartCov","hits":"1","order":"408","possible_hits":"2",},
{"lineNum":"  109","line":"                    if (embedded_jpeg_count < jpg_ends_found) {","class":"lineCov","hits":"1","order":"409","possible_hits":"1",},
{"lineNum":"  110","line":"                        idx_jpg_end = idx;","class":"lineCov","hits":"1","order":"419","possible_hits":"1",},
{"lineNum":"  111","line":"                        try self.reader.seek_by(-@as(i64, @intCast(read_bytes - idx_jpg_end)));","class":"linePartCov","hits":"1","order":"420","possible_hits":"2",},
{"lineNum":"  112","line":"                        break;","class":"lineCov","hits":"3","order":"410","possible_hits":"3",},
{"lineNum":"  113","line":"                    }"},
{"lineNum":"  114","line":"                } else {"},
{"lineNum":"  115","line":"                    idx += 1;","class":"linePartCov","hits":"3","order":"368","possible_hits":"4",},
{"lineNum":"  116","line":"                }"},
{"lineNum":"  117","line":"            }","class":"linePartCov","hits":"2","order":"363","possible_hits":"3",},
{"lineNum":"  118","line":""},
{"lineNum":"  119","line":"            if (jpg_started and idx_jpg_end == 0) {","class":"lineCov","hits":"2","order":"371","possible_hits":"2",},
{"lineNum":"  120","line":"                const for_copy = buf[idx_jpg_start..buf.len - bytes_left];","class":"linePartCov","hits":"2","order":"372","possible_hits":"3",},
{"lineNum":"  121","line":"                @memcpy(img_data[jpg_mem_copied..jpg_mem_copied + for_copy.len], for_copy);","class":"linePartCov","hits":"2","order":"373","possible_hits":"3",},
{"lineNum":"  122","line":"                jpg_mem_copied += for_copy.len;","class":"linePartCov","hits":"1","order":"374","possible_hits":"2",},
{"lineNum":"  123","line":"                // has to be reset for it to copy correct bytes on the next read"},
{"lineNum":"  124","line":"                idx_jpg_start = 0;","class":"lineCov","hits":"1","order":"375","possible_hits":"1",},
{"lineNum":"  125","line":"                if (self.debug) {","class":"lineCov","hits":"1","order":"376","possible_hits":"1",},
{"lineNum":"  126","line":"                    @memcpy(&bytes_left_buf, buf[buf.len-bytes_left..]);","class":"lineNoCov","hits":"0","possible_hits":"3",},
{"lineNum":"  127","line":"                    log.debug(\"last copied bytes: {x}, left bytes: {x}\", .{img_data[jpg_mem_copied-bytes_left..jpg_mem_copied], buf[buf.len-bytes_left..]});","class":"linePartCov","hits":"2","order":"377","possible_hits":"4",},
{"lineNum":"  128","line":"                }"},
{"lineNum":"  129","line":"            } else if (jpg_started and idx_jpg_end != 0) {","class":"lineCov","hits":"2","order":"384","possible_hits":"2",},
{"lineNum":"  130","line":"                const for_copy = buf[idx_jpg_start..idx_jpg_end];","class":"lineCov","hits":"3","order":"385","possible_hits":"3",},
{"lineNum":"  131","line":"                @memcpy(img_data[jpg_mem_copied..jpg_mem_copied + for_copy.len], for_copy);","class":"linePartCov","hits":"2","order":"386","possible_hits":"3",},
{"lineNum":"  132","line":"                jpg_mem_copied += for_copy.len;","class":"linePartCov","hits":"1","order":"387","possible_hits":"2",},
{"lineNum":"  133","line":""},
{"lineNum":"  134","line":"                // free unused memory from the img_data buffer"},
{"lineNum":"  135","line":"                img_data = try self.alloc.realloc(img_data, jpg_mem_copied);","class":"linePartCov","hits":"1","order":"388","possible_hits":"2",},
{"lineNum":"  136","line":"                return JPEG.init(self.alloc, img_data);","class":"lineCov","hits":"4","order":"389","possible_hits":"4",},
{"lineNum":"  137","line":"            }"},
{"lineNum":"  138","line":"        }","class":"lineCov","hits":"1","order":"378","possible_hits":"1",},
{"lineNum":"  139","line":"        return null;","class":"lineNoCov","hits":"0","possible_hits":"1",},
{"lineNum":"  140","line":"    }"},
{"lineNum":"  141","line":"};"},
{"lineNum":"  142","line":""},
{"lineNum":"  143","line":"test {","class":"lineCov","hits":"1","order":"9","possible_hits":"1",},
{"lineNum":"  144","line":"    std.testing.refAllDecls(Tests);","class":"lineCov","hits":"1","order":"10","possible_hits":"1",},
{"lineNum":"  145","line":"}"},
{"lineNum":"  146","line":""},
{"lineNum":"  147","line":"const Tests = struct {"},
{"lineNum":"  148","line":"    const t = std.testing;"},
{"lineNum":"  149","line":"    const t_alloc = t.allocator;"},
{"lineNum":"  150","line":"    const FsHandler = lib.FilesystemHandler;"},
{"lineNum":"  151","line":"    const utils = @import(\"testing_utils.zig\");"},
{"lineNum":"  152","line":"    const proj_t_utils = @import(\"../testing_utils.zig\");"},
{"lineNum":"  153","line":"    const testing_fs_handler = utils.testing_fs_handler;"},
{"lineNum":"  154","line":"    const testing_original_data = utils.testing_original_data;"},
{"lineNum":"  155","line":"    const hash = utils.hash;"},
{"lineNum":"  156","line":"    const Hashes = utils.Hashes;"},
{"lineNum":"  157","line":"    const cleanup_hashes = utils.cleanup_hashes;"},
{"lineNum":"  158","line":"    const tlog = std.log.scoped(.jpg_tests);"},
{"lineNum":"  159","line":""},
{"lineNum":"  160","line":"    const TestExample = enum {"},
{"lineNum":"  161","line":"        @\"input/jpgs/example1.jpg\","},
{"lineNum":"  162","line":"        @\"input/jpgs/example2.jpg\","},
{"lineNum":"  163","line":"        @\"input/jpgs/example3.jpg\","},
{"lineNum":"  164","line":"        @\"input/jpgs/example4.jpg\","},
{"lineNum":"  165","line":""},
{"lineNum":"  166","line":"        const paths = p: {"},
{"lineNum":"  167","line":"            const self_type_info = @typeInfo(TestExample).@\"enum\";"},
{"lineNum":"  168","line":"            const len = self_type_info.fields.len;"},
{"lineNum":"  169","line":"            var ps: [len][]const u8 = undefined;"},
{"lineNum":"  170","line":"            for (self_type_info.fields, 0..) |f, idx| {"},
{"lineNum":"  171","line":"                ps[idx] = f.name;"},
{"lineNum":"  172","line":"                // @compileLog(std.fmt.comptimePrint(\"field_name: {s}\\n\", .{f.name}));"},
{"lineNum":"  173","line":"            }"},
{"lineNum":"  174","line":"            break :p ps;"},
{"lineNum":"  175","line":"        };"},
{"lineNum":"  176","line":""},
{"lineNum":"  177","line":"        fn hashes() !Hashes {","class":"lineCov","hits":"1","order":"428","possible_hits":"1",},
{"lineNum":"  178","line":"            var hs = Hashes.init(t_alloc);","class":"lineCov","hits":"1","order":"429","possible_hits":"1",},
{"lineNum":"  179","line":"            for (paths) |p| {","class":"lineCov","hits":"3","order":"430","possible_hits":"3",},
{"lineNum":"  180","line":"                const data = try testing_original_data(p);","class":"linePartCov","hits":"1","order":"431","possible_hits":"2",},
{"lineNum":"  181","line":"                defer t_alloc.free(data);","class":"linePartCov","hits":"1","order":"444","possible_hits":"3",},
{"lineNum":"  182","line":"                const hash_ptr = try hash(data);","class":"linePartCov","hits":"1","order":"437","possible_hits":"2",},
{"lineNum":"  183","line":"                try hs.put(hash_ptr, {});","class":"linePartCov","hits":"1","order":"443","possible_hits":"2",},
{"lineNum":"  184","line":"            }","class":"lineCov","hits":"3","order":"445","possible_hits":"3",},
{"lineNum":"  185","line":"            return hs;","class":"lineCov","hits":"1","order":"446","possible_hits":"1",},
{"lineNum":"  186","line":"        }"},
{"lineNum":"  187","line":"    };"},
{"lineNum":"  188","line":""},
{"lineNum":"  189","line":"    test \"jpgs read straight from the disk are interpreted via reader as the same imgs\" {","class":"lineCov","hits":"1","order":"322","possible_hits":"1",},
{"lineNum":"  190","line":"        try proj_t_utils.skip_slow_test();","class":"lineCov","hits":"1","order":"323","possible_hits":"1",},
{"lineNum":"  191","line":""},
{"lineNum":"  192","line":"        inline for (TestExample.paths) |p| {","class":"lineCov","hits":"1","order":"324","possible_hits":"1",},
{"lineNum":"  193","line":"            tlog.debug(\"file: {s}\", .{p});","class":"lineCov","hits":"4","order":"325","possible_hits":"4",},
{"lineNum":"  194","line":"            var orig_mem_data: []u8 = undefined;","class":"lineCov","hits":"4","order":"326","possible_hits":"4",},
{"lineNum":"  195","line":"            defer t_alloc.free(orig_mem_data);","class":"linePartCov","hits":"4","order":"401","possible_hits":"28",},
{"lineNum":"  196","line":"            {"},
{"lineNum":"  197","line":"                const f = try std.fs.cwd().openFile(p, .{});","class":"linePartCov","hits":"4","order":"327","possible_hits":"12",},
{"lineNum":"  198","line":"                defer f.close();","class":"linePartCov","hits":"4","order":"330","possible_hits":"8",},
{"lineNum":"  199","line":"                orig_mem_data = try f.readToEndAlloc(t_alloc, 20e6);","class":"linePartCov","hits":"4","order":"328","possible_hits":"8",},
{"lineNum":"  200","line":"                tlog.debug(\"orig_mem_data_len: {d}\", .{orig_mem_data.len});","class":"lineCov","hits":"4","order":"329","possible_hits":"4",},
{"lineNum":"  201","line":"            }"},
{"lineNum":"  202","line":"            {"},
{"lineNum":"  203","line":"                const f = try std.fs.cwd().openFile(p, .{});","class":"linePartCov","hits":"4","order":"331","possible_hits":"12",},
{"lineNum":"  204","line":"                const reader = try Reader.init(&f);","class":"linePartCov","hits":"4","order":"332","possible_hits":"8",},
{"lineNum":"  205","line":"                var jpg_r = JPGRecoverer.init(t_alloc, reader);","class":"lineCov","hits":"4","order":"333","possible_hits":"4",},
{"lineNum":"  206","line":"                defer jpg_r.deinit();","class":"linePartCov","hits":"4","order":"398","possible_hits":"12",},
{"lineNum":"  207","line":"                var jpg = (try jpg_r.find_next()).?;","class":"linePartCov","hits":"8","order":"336","possible_hits":"12",},
{"lineNum":"  208","line":"                tlog.debug(\"recovered_data_len: {d}\", .{jpg.data.len});","class":"lineCov","hits":"4","order":"393","possible_hits":"4",},
{"lineNum":"  209","line":"                defer jpg.deinit();","class":"linePartCov","hits":"4","order":"395","possible_hits":"8",},
{"lineNum":"  210","line":""},
{"lineNum":"  211","line":"                try t.expectEqualSlices(u8, orig_mem_data, jpg.data);","class":"linePartCov","hits":"4","order":"394","possible_hits":"8",},
{"lineNum":"  212","line":"            }"},
{"lineNum":"  213","line":"        }","class":"lineCov","hits":"8","order":"402","possible_hits":"8",},
{"lineNum":"  214","line":"    }"},
{"lineNum":"  215","line":""},
{"lineNum":"  216","line":"    test \"recovered jpgs have correct start and end bytes\" {","class":"lineCov","hits":"1","order":"411","possible_hits":"1",},
{"lineNum":"  217","line":"        var fs_handler = try testing_fs_handler();","class":"lineCov","hits":"1","order":"412","possible_hits":"1",},
{"lineNum":"  218","line":"        defer fs_handler.deinit();","class":"linePartCov","hits":"1","order":"424","possible_hits":"5",},
{"lineNum":"  219","line":"        const reader = try fs_handler.create_new_reader();","class":"linePartCov","hits":"1","order":"416","possible_hits":"2",},
{"lineNum":"  220","line":"        var jpg_r = JPGRecoverer.init(t_alloc, reader);","class":"lineCov","hits":"1","order":"417","possible_hits":"1",},
{"lineNum":"  221","line":"        const jpg = (try jpg_r.find_next()).?;","class":"linePartCov","hits":"2","order":"418","possible_hits":"3",},
{"lineNum":"  222","line":"        defer jpg.deinit();","class":"linePartCov","hits":"1","order":"423","possible_hits":"3",},
{"lineNum":"  223","line":"        try t.expectEqualSlices(u8, jpg.data[0..3], &[3]u8{ 0xff, 0xd8, 0xff });","class":"linePartCov","hits":"2","order":"421","possible_hits":"3",},
{"lineNum":"  224","line":"        try t.expectEqualSlices(u8, jpg.data[jpg.data.len-2..], &[2]u8{ 0xff, 0xd9 });","class":"linePartCov","hits":"1","order":"422","possible_hits":"2",},
{"lineNum":"  225","line":"    }"},
{"lineNum":"  226","line":""},
{"lineNum":"  227","line":"    test \"recover jpg from fat32, verify using sha1\" {","class":"lineCov","hits":"1","order":"425","possible_hits":"1",},
{"lineNum":"  228","line":"        try proj_t_utils.skip_slow_test();","class":"lineCov","hits":"1","order":"426","possible_hits":"1",},
{"lineNum":"  229","line":""},
{"lineNum":"  230","line":"        var hashes = try TestExample.hashes();","class":"lineCov","hits":"1","order":"427","possible_hits":"1",},
{"lineNum":"  231","line":"        defer cleanup_hashes(&hashes);","class":"linePartCov","hits":"1","order":"462","possible_hits":"7",},
{"lineNum":"  232","line":"        var fs_handler = try testing_fs_handler();","class":"linePartCov","hits":"1","order":"447","possible_hits":"2",},
{"lineNum":"  233","line":"        defer fs_handler.deinit();","class":"linePartCov","hits":"1","order":"461","possible_hits":"6",},
{"lineNum":"  234","line":""},
{"lineNum":"  235","line":"        const reader = try fs_handler.create_new_reader();","class":"linePartCov","hits":"1","order":"448","possible_hits":"2",},
{"lineNum":"  236","line":"        var jpg_r = JPGRecoverer.init(t_alloc, reader);","class":"lineCov","hits":"1","order":"449","possible_hits":"1",},
{"lineNum":"  237","line":""},
{"lineNum":"  238","line":"        const output_paths = utils.calc_output_paths(TestExample.paths.len, TestExample.paths);","class":"lineCov","hits":"1","order":"450","possible_hits":"1",},
{"lineNum":"  239","line":""},
{"lineNum":"  240","line":"        for (output_paths) |op| {","class":"lineCov","hits":"3","order":"453","possible_hits":"3",},
{"lineNum":"  241","line":"            const jpg = (try jpg_r.find_next()).?;","class":"linePartCov","hits":"2","order":"454","possible_hits":"4",},
{"lineNum":"  242","line":"            defer jpg.deinit();","class":"linePartCov","hits":"1","order":"459","possible_hits":"4",},
{"lineNum":"  243","line":"            if (t.log_level == .debug) try jpg.write_to_file(op);","class":"linePartCov","hits":"1","order":"455","possible_hits":"3",},
{"lineNum":"  244","line":"            const h = try hash(jpg.data);","class":"linePartCov","hits":"1","order":"456","possible_hits":"3",},
{"lineNum":"  245","line":"            defer t_alloc.free(h);","class":"linePartCov","hits":"1","order":"458","possible_hits":"2",},
{"lineNum":"  246","line":""},
{"lineNum":"  247","line":"            try t.expect(hashes.contains(h));","class":"linePartCov","hits":"1","order":"457","possible_hits":"2",},
{"lineNum":"  248","line":"        }","class":"lineCov","hits":"3","order":"460","possible_hits":"3",},
{"lineNum":"  249","line":"    }"},
{"lineNum":"  250","line":"};"},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "test", "date" : "2025-03-09 09:32:06", "instrumented" : 135, "covered" : 128,};
var merged_data = [];
